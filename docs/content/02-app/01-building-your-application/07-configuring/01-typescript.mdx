---
title: TypeScript
description: Next.js æä¾›äº† TypeScript ä¼˜å…ˆçš„å¼€å‘ä½“éªŒï¼Œç”¨äºæ„å»ºæ‚¨çš„ React åº”ç”¨ç¨‹åºã€‚
---

{/* The content of this doc is shared between the app and pages router. You can use the `<PagesOnly>Content</PagesOnly>` component to add content that is specific to the Pages Router. Any shared content should not be wrapped in a component. */}

Next.js æä¾›äº† TypeScript ä¼˜å…ˆçš„å¼€å‘ä½“éªŒï¼Œç”¨äºæ„å»ºæ‚¨çš„ React åº”ç”¨ç¨‹åºã€‚

å®ƒå†…ç½®äº† TypeScript æ”¯æŒï¼Œå¯ä»¥è‡ªåŠ¨å®‰è£…å¿…è¦çš„åŒ…å¹¶é…ç½®é€‚å½“çš„è®¾ç½®ã€‚

ä»¥åŠä¸ºæ‚¨çš„ç¼–è¾‘å™¨æä¾›çš„[TypeScript æ’ä»¶](#typescript-plugin)ã€‚

> **ğŸ¥ è§‚çœ‹:** äº†è§£å†…ç½®çš„ TypeScript æ’ä»¶ â†’ [YouTube (3 åˆ†é’Ÿ)](https://www.youtube.com/watch?v=pqMqn9fKEf8)

## æ–°é¡¹ç›®

`create-next-app`ç°åœ¨é»˜è®¤é™„å¸¦ TypeScriptã€‚

```bash filename="Terminal"
npx create-next-app@latest
```

## ç°æœ‰é¡¹ç›®

é€šè¿‡å°†æ–‡ä»¶é‡å‘½åä¸º`.ts` / `.tsx`æ¥å°† TypeScript æ·»åŠ åˆ°æ‚¨çš„é¡¹ç›®ä¸­ã€‚è¿è¡Œ`next dev` å’Œ `next build`å°†è‡ªåŠ¨å®‰è£…å¿…è¦çš„ä¾èµ–é¡¹ï¼Œå¹¶æ·»åŠ å¸¦æœ‰æ¨èé…ç½®é€‰é¡¹çš„`tsconfig.json`æ–‡ä»¶ã€‚

å¦‚æœæ‚¨å·²ç»æœ‰ä¸€ä¸ª`jsconfig.json`æ–‡ä»¶ï¼Œè¯·å°†æ—§`jsconfig.json`æ–‡ä»¶ä¸­çš„`paths`ç¼–è¯‘å™¨é€‰é¡¹å¤åˆ¶åˆ°æ–°çš„`tsconfig.json`æ–‡ä»¶ä¸­ï¼Œç„¶ååˆ é™¤æ—§çš„`jsconfig.json`æ–‡ä»¶ã€‚

æˆ‘ä»¬è¿˜å»ºè®®æ‚¨ä½¿ç”¨[`next.config.ts`](#type-checking-nextconfigts) ä»£æ›¿`next.config.js`ä»¥è·å¾—æ›´å¥½çš„ç±»å‹æ¨æ–­ã€‚

## TypeScript æ’ä»¶

Next.js åŒ…å«ä¸€ä¸ªè‡ªå®šä¹‰çš„ TypeScript æ’ä»¶å’Œç±»å‹æ£€æŸ¥å™¨ï¼ŒVSCode å’Œå…¶ä»–ä»£ç ç¼–è¾‘å™¨å¯ä»¥ä½¿ç”¨å®ƒä»¬è¿›è¡Œé«˜çº§ç±»å‹æ£€æŸ¥å’Œè‡ªåŠ¨è¡¥å…¨ã€‚

æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤åœ¨ VS Code ä¸­å¯ç”¨æ’ä»¶ï¼š

1. æ‰“å¼€å‘½ä»¤é¢æ¿ (`Ctrl/âŒ˜` + `Shift` + `P`)
2. æœç´¢"TypeScript: Select TypeScript Version"
3. é€‰æ‹©"Use Workspace Version"

<img
  alt="TypeScript Command Palette"
  src="/typescript-command-palette.avif"
  width="100%"
  height="auto"
/>

ç°åœ¨ï¼Œåœ¨ç¼–è¾‘æ–‡ä»¶æ—¶ï¼Œè‡ªå®šä¹‰æ’ä»¶å°†è¢«å¯ç”¨ã€‚åœ¨è¿è¡Œ`next build`æ—¶ï¼Œå°†ä½¿ç”¨è‡ªå®šä¹‰ç±»å‹æ£€æŸ¥å™¨ã€‚

### æ’ä»¶åŠŸèƒ½

TypeScript æ’ä»¶å¯ä»¥å¸®åŠ©:

- å¦‚æœä¼ é€’[æ®µé…ç½®é€‰é¡¹](/docs/content/app/api-reference/file-conventions/route-segment-config) çš„æ— æ•ˆå€¼ï¼Œåˆ™è­¦å‘Šã€‚
- æ˜¾ç¤ºå¯ç”¨é€‰é¡¹å’Œä¸Šä¸‹æ–‡æ–‡æ¡£ã€‚
- ç¡®ä¿æ­£ç¡®ä½¿ç”¨`use client`æŒ‡ä»¤ã€‚
- ç¡®ä¿å®¢æˆ·ç«¯ hooks (å¦‚ `useState`)ä»…åœ¨å®¢æˆ·ç«¯ç»„ä»¶ä¸­ä½¿ç”¨ã€‚

> **æ‚¨éœ€è¦çŸ¥é“**:å°†æ¥ä¼šæ·»åŠ æ›´å¤šåŠŸèƒ½ã€‚

## æœ€ä½ TypeScript ç‰ˆæœ¬

å¼ºçƒˆå»ºè®®ä½¿ç”¨è‡³å°‘`v4.5.2`ç‰ˆæœ¬çš„ TypeScriptï¼Œä»¥è·å¾—è¯¸å¦‚[å¯¼å…¥åç§°ä¸Šçš„ç±»å‹ä¿®é¥°ç¬¦](https://devblogs.microsoft.com/typescript/announcing-typescript-4-5/#type-on-import-names) å’Œ [æ€§èƒ½æ”¹è¿›](https://devblogs.microsoft.com/typescript/announcing-typescript-4-5/#real-path-sync-native) ç­‰è¯­æ³•åŠŸèƒ½ã€‚

## Next.js ä¸­çš„ç±»å‹æ£€æŸ¥é…ç½®

### ç±»å‹æ£€æŸ¥ next.config.js

å½“ä½¿ç”¨`next.config.js`æ–‡ä»¶æ—¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ JSDoc åœ¨æ‚¨çš„ IDE ä¸­æ·»åŠ ä¸€äº›ç±»å‹æ£€æŸ¥ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```js filename="next.config.js"
// @ts-check

/** @type {import('next').NextConfig} */
const nextConfig = {
  /* config options here */
};

module.exports = nextConfig;
```

### ç±»å‹æ£€æŸ¥ next.config.ts

æ‚¨å¯ä»¥ä½¿ç”¨ TypeScriptï¼Œå¹¶é€šè¿‡ä½¿ç”¨`next.config.ts`åœ¨æ‚¨çš„ Next.js é…ç½®ä¸­å¯¼å…¥ç±»å‹ã€‚

```ts filename="next.config.ts"
import type { NextConfig } from "next";

const nextConfig: NextConfig = {
  /* config options here */
};

export default nextConfig;
```

> **æ‚¨éœ€è¦çŸ¥é“**: æ‚¨å¯ä»¥åœ¨`next.config.ts`ä¸­æ— éœ€ä»»ä½•é¢å¤–é…ç½®åœ°å¯¼å…¥åŸç”Ÿ ESM æ¨¡å—ã€‚æ”¯æŒå¯¼å…¥`.cjs`ã€`.cts`ã€`.mjs`å’Œ`.mts`ç­‰æ‰©å±•åã€‚

## é™æ€ç±»å‹é“¾æ¥

Next.js å¯ä»¥é™æ€ç±»å‹åŒ–é“¾æ¥ï¼Œä»¥é˜²æ­¢åœ¨ä½¿ç”¨`next/link`æ—¶å‡ºç°æ‹¼å†™é”™è¯¯å’Œå…¶ä»–é”™è¯¯ï¼Œä»è€Œåœ¨é¡µé¢ä¹‹é—´å¯¼èˆªæ—¶æé«˜ç±»å‹å®‰å…¨æ€§ã€‚

è¦å¯ç”¨æ­¤åŠŸèƒ½ï¼Œéœ€è¦å¯ç”¨`experimental.typedRoutes`å¹¶ä¸”é¡¹ç›®éœ€è¦ä½¿ç”¨ TypeScriptã€‚

```ts filename="next.config.ts"
import type { NextConfig } from "next";

const nextConfig: NextConfig = {
  experimental: {
    typedRoutes: true,
  },
};

export default nextConfig;
```

Next.js ä¼šåœ¨`.next/types`ä¸­ç”Ÿæˆä¸€ä¸ªé“¾æ¥å®šä¹‰ï¼Œå…¶ä¸­åŒ…å«æœ‰å…³åº”ç”¨ç¨‹åºä¸­æ‰€æœ‰ç°æœ‰è·¯ç”±çš„ä¿¡æ¯ï¼ŒTypeScript å¯ä»¥ä½¿ç”¨è¿™äº›ä¿¡æ¯åœ¨ç¼–è¾‘å™¨ä¸­æä¾›æœ‰å…³æ— æ•ˆé“¾æ¥çš„åé¦ˆã€‚

ç›®å‰ï¼Œå®éªŒæ€§æ”¯æŒåŒ…æ‹¬ä»»ä½•å­—ç¬¦ä¸²å­—é¢é‡ï¼ŒåŒ…æ‹¬åŠ¨æ€æ®µã€‚å¯¹äºéå­—é¢é‡å­—ç¬¦ä¸²ï¼Œæ‚¨éœ€è¦æ‰‹åŠ¨å°†`href`å¼ºåˆ¶è½¬æ¢ä¸º`as Route`:

```tsx
import type { Route } from 'next';
import Link from 'next/link'

// No TypeScript errors if href is a valid route
<Link href="/about" />
<Link href="/blog/nextjs" />
<Link href={`/blog/${slug}`} />
<Link href={('/blog' + slug) as Route} />

// TypeScript errors if href is not a valid route
<Link href="/aboot" />
```

è¦åœ¨è‡ªå®šä¹‰ç»„ä»¶`next/link`ä¸­æ¥å—`href`ï¼Œè¯·ä½¿ç”¨æ³›å‹ï¼š

```tsx
import type { Route } from "next";
import Link from "next/link";

function Card<T extends string>({ href }: { href: Route<T> | URL }) {
  return (
    <Link href={href}>
      <div>My Card</div>
    </Link>
  );
}
```

> **å®ƒçš„å·¥ä½œåŸç†?**
>
> å½“è¿è¡Œ`next dev` æˆ– `next build`æ—¶ï¼ŒNext.js ä¼šåœ¨`.next`ä¸­ç”Ÿæˆä¸€ä¸ªéšè—çš„`.d.ts`æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«æœ‰å…³åº”ç”¨ç¨‹åºä¸­æ‰€æœ‰ç°æœ‰è·¯ç”±çš„ä¿¡æ¯(æ‰€æœ‰æœ‰æ•ˆè·¯ç”±ä½œä¸º`Link`çš„`href`ç±»å‹)ã€‚è¿™ä¸ª `.d.ts`æ–‡ä»¶ä¼šè¢«åŒ…å«åœ¨`tsconfig.json`ä¸­ï¼ŒTypeScript ç¼–è¯‘å™¨å°†æ£€æŸ¥è¯¥`.d.ts`æ–‡ä»¶ï¼Œå¹¶åœ¨æ‚¨çš„ç¼–è¾‘å™¨ä¸­æä¾›æœ‰å…³æ— æ•ˆé“¾æ¥çš„åé¦ˆã€‚

## ç«¯åˆ°ç«¯ç±»å‹å®‰å…¨

Next.js App Router**å¢å¼ºäº†ç±»å‹å®‰å…¨**ã€‚è¿™åŒ…æ‹¬:

1. **è·å–å‡½æ•°å’Œé¡µé¢ä¹‹é—´æ²¡æœ‰æ•°æ®åºåˆ—åŒ–**: æ‚¨å¯ä»¥ç›´æ¥åœ¨æœåŠ¡å™¨ä¸Šçš„ç»„ä»¶ã€å¸ƒå±€å’Œé¡µé¢ä¸­ä½¿ç”¨`fetch`ã€‚è¿™äº›æ•°æ®ä¸éœ€è¦åºåˆ—åŒ– (è½¬æ¢ä¸ºå­—ç¬¦ä¸²) å³å¯ä¼ é€’åˆ°å®¢æˆ·ç«¯ä¾› React ä½¿ç”¨ã€‚ç›¸åï¼Œç”±äº`app`é»˜è®¤ä½¿ç”¨æœåŠ¡å™¨ç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨`Date`ã€`Map`ã€`Set`ç­‰å€¼ï¼Œè€Œæ— éœ€ä»»ä½•é¢å¤–æ­¥éª¤ã€‚ä»¥å‰ï¼Œæ‚¨éœ€è¦ä½¿ç”¨ Next.js ç‰¹å®šçš„ç±»å‹æ‰‹åŠ¨å®šä¹‰æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¹‹é—´çš„è¾¹ç•Œã€‚
2. **ç®€åŒ–ç»„ä»¶ä¹‹é—´çš„æ•°æ®æµ**: éšç€`_app`è¢«æ ¹å¸ƒå±€å–ä»£ï¼Œç°åœ¨æ›´å®¹æ˜“å¯è§†åŒ–ç»„ä»¶å’Œé¡µé¢ä¹‹é—´çš„æ•°æ®æµã€‚ä»¥å‰ï¼Œæ•°æ®åœ¨å„ä¸ª`pages` å’Œ `_app`ä¹‹é—´æµåŠ¨æ—¶å¾ˆéš¾è¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œå¹¶ä¸”å¯èƒ½å¼•å…¥ä»¤äººå›°æƒ‘çš„é”™è¯¯ã€‚é€šè¿‡åœ¨ App Router ä¸­ä½¿ç”¨[colocated data fetching](/docs/content/app/building-your-application/data-fetching/caching-and-revalidating)ï¼Œè¿™ä¸ªé—®é¢˜ä¸å†å­˜åœ¨ã€‚

[Next.js ä¸­çš„æ•°æ®è·å–](/docs/content/app/building-your-application/data-fetching/caching-and-revalidating) æä¾›äº†å°½å¯èƒ½æ¥è¿‘ç«¯åˆ°ç«¯çš„ç±»å‹å®‰å…¨ï¼Œè€Œæ— éœ€å¯¹æ•°æ®åº“æˆ–å†…å®¹æä¾›è€…é€‰æ‹©è¿›è¡Œè§„å®šã€‚

æˆ‘ä»¬å¯ä»¥åƒä½¿ç”¨æ™®é€š TypeScript ä¸€æ ·å¯¹å“åº”æ•°æ®è¿›è¡Œç±»å‹å®šä¹‰ã€‚ä¾‹å¦‚ï¼š

```tsx filename="app/page.tsx"
async function getData() {
  const res = await fetch("https://api.example.com/...");
  // The return value is *not* serialized
  // You can return Date, Map, Set, etc.
  return res.json();
}

export default async function Page() {
  const name = await getData();

  return "...";
}
```

è¦å®ç°å®Œæ•´çš„ç«¯åˆ°ç«¯ç±»å‹å®‰å…¨ï¼Œè¿™è¿˜éœ€è¦æ‚¨çš„æ•°æ®åº“æˆ–å†…å®¹æä¾›è€…æ”¯æŒ TypeScriptã€‚è¿™å¯ä»¥é€šè¿‡ä½¿ç”¨[ORM](https://en.wikipedia.org/wiki/Object%E2%80%93relational_mapping)æˆ–ç±»å‹å®‰å…¨çš„æŸ¥è¯¢æ„å»ºå™¨æ¥å®ç°ã€‚

## å¼‚æ­¥æœåŠ¡å™¨ç»„ä»¶ TypeScript é”™è¯¯

è¦å°†`async`æœåŠ¡å™¨ç»„ä»¶ä¸ TypeScript ä¸€èµ·ä½¿ç”¨, è¯·ç¡®ä¿æ‚¨ä½¿ç”¨çš„æ˜¯ TypeScript`5.1.3`æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œä»¥åŠ`@types/react` `18.2.8`æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚

å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯è¾ƒæ—§ç‰ˆæœ¬çš„ TypeScriptï¼Œæ‚¨å¯èƒ½ä¼šçœ‹åˆ°`'Promise<Element>' is not a valid JSX element`ç±»å‹é”™è¯¯ã€‚æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬çš„ TypeScript å’Œ `@types/react`åº”è¯¥å¯ä»¥è§£å†³æ­¤é—®é¢˜ã€‚

## åœ¨æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ç»„ä»¶ä¹‹é—´ä¼ é€’æ•°æ®

å½“é€šè¿‡ props åœ¨æœåŠ¡å™¨ç»„ä»¶å’Œå®¢æˆ·ç«¯ç»„ä»¶ä¹‹é—´ä¼ é€’æ•°æ®æ—¶ï¼Œæ•°æ®ä»ç„¶ä¼šè¢«åºåˆ—åŒ–ï¼ˆè½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼‰ä»¥ä¾¿åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ã€‚ç„¶è€Œï¼Œå®ƒä¸éœ€è¦ç‰¹æ®Šçš„ç±»å‹ã€‚å®ƒçš„ç±»å‹æ£€æŸ¥æ–¹å¼ä¸åœ¨ç»„ä»¶ä¹‹é—´ä¼ é€’ä»»ä½•å…¶ä»– props çš„ç±»å‹æ£€æŸ¥æ–¹å¼ç›¸åŒã€‚

æ­¤å¤–ï¼Œç”±äºæœªæ¸²æŸ“çš„æ•°æ®ä¸ä¼šåœ¨æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¹‹é—´ä¼ é€’ï¼ˆå®ƒä¿ç•™åœ¨æœåŠ¡å™¨ä¸Šï¼‰ï¼Œå› æ­¤éœ€è¦åºåˆ—åŒ–çš„ä»£ç æ›´å°‘ã€‚ç°åœ¨åªæœ‰é€šè¿‡æ”¯æŒæœåŠ¡å™¨ç»„ä»¶æ‰èƒ½å®ç°è¿™ä¸€ç‚¹ã€‚

## è·¯å¾„åˆ«åå’Œ baseUrl

Next.js è‡ªåŠ¨æ”¯æŒ`tsconfig.json`ä¸­çš„`"paths"`å’Œ`"baseUrl"`é€‰é¡¹ã€‚

æ‚¨å¯ä»¥åœ¨[Module Path aliases æ–‡æ¡£](/docs/content/app/building-your-application/configuring/absolute-imports-and-module-aliases)ä¸­äº†è§£æ›´å¤šå…³äºæ­¤åŠŸèƒ½çš„ä¿¡æ¯ã€‚

## å¢é‡ç±»å‹æ£€æŸ¥

è‡ª`v10.2.1`èµ·ï¼ŒNext.js åœ¨æ‚¨çš„`tsconfig.json`ä¸­å¯ç”¨åï¼Œæ”¯æŒ[å¢é‡ç±»å‹æ£€æŸ¥](https://www.typescriptlang.org/tsconfig#incremental)ï¼Œè¿™å¯ä»¥å¸®åŠ©åŠ å¿«å¤§å‹åº”ç”¨ç¨‹åºä¸­çš„ç±»å‹æ£€æŸ¥é€Ÿåº¦ã€‚

## å¿½ç•¥ TypeScript é”™è¯¯

åœ¨æ‚¨çš„é¡¹ç›®ä¸­å­˜åœ¨ TypeScript é”™è¯¯æ—¶ï¼ŒNext.js ä¼š**ç”Ÿäº§æ„å»º** (`next build`)å¤±è´¥ã€‚

å¦‚æœæ‚¨å¸Œæœ› Next.js åœ¨æ‚¨çš„åº”ç”¨ç¨‹åºå­˜åœ¨é”™è¯¯æ—¶ä»ç„¶å±é™©åœ°ç”Ÿæˆç”Ÿäº§ä»£ç ï¼Œæ‚¨å¯ä»¥ç¦ç”¨å†…ç½®çš„ç±»å‹æ£€æŸ¥æ­¥éª¤ã€‚

å¦‚æœç¦ç”¨ï¼Œè¯·ç¡®ä¿åœ¨æ„å»ºæˆ–éƒ¨ç½²è¿‡ç¨‹ä¸­è¿è¡Œç±»å‹æ£€æŸ¥ï¼Œå¦åˆ™è¿™å¯èƒ½éå¸¸å±é™©ã€‚

æ‰“å¼€`next.config.ts`å¹¶åœ¨`typescript`é…ç½®ä¸­å¯ç”¨`ignoreBuildErrors`é€‰é¡¹ï¼š

```ts filename="next.config.ts"
export default {
  typescript: {
    // !! WARN !!
    // Dangerously allow production builds to successfully complete even if
    // your project has type errors.
    // !! WARN !!
    ignoreBuildErrors: true,
  },
};
```

## è‡ªå®šä¹‰ç±»å‹å£°æ˜

å½“æ‚¨éœ€è¦å£°æ˜è‡ªå®šä¹‰ç±»å‹æ—¶ï¼Œæ‚¨å¯èƒ½ä¼šæƒ³è¦ä¿®æ”¹`next-env.d.ts`ã€‚ç„¶è€Œï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œå› æ­¤æ‚¨æ‰€åšçš„ä»»ä½•æ›´æ”¹éƒ½ä¼šè¢«è¦†ç›–ã€‚ç›¸åï¼Œæ‚¨åº”è¯¥åˆ›å»ºä¸€ä¸ªå«`new-types.d.ts`çš„æ–°æ–‡ä»¶ï¼Œå¹¶åœ¨æ‚¨çš„`tsconfig.json`ä¸­å¼•ç”¨å®ƒï¼š

```json filename="tsconfig.json"
{
  "compilerOptions": {
    "skipLibCheck": true
    //...truncated...
  },
  "include": [
    "new-types.d.ts",
    "next-env.d.ts",
    ".next/types/**/*.ts",
    "**/*.ts",
    "**/*.tsx"
  ],
  "exclude": ["node_modules"]
}
```

## ç‰ˆæœ¬å˜æ›´

| Version   | Changes                                                                                                    |
| --------- | ---------------------------------------------------------------------------------------------------------- |
| `v15.0.0` | [`next.config.ts`](#type-checking-nextconfigts) å¢åŠ å¯¹ TypeScript é¡¹ç›®çš„æ”¯æŒã€‚                             |
| `v13.2.0` | é™æ€ç±»å‹é“¾æ¥åœ¨æµ‹è¯•ç‰ˆä¸­å¯ç”¨ã€‚                                                                               |
| `v12.0.0` | [SWC](/docs/content/architecture/nextjs-compiler)ç°åœ¨é»˜è®¤ç”¨äºç¼–è¯‘ TypeScript å’Œ TSXï¼Œä»¥åŠ å¿«æ„å»ºé€Ÿåº¦ã€‚      |
| `v10.2.1` | åœ¨`tsconfig.json`ä¸­å¯ç”¨æ—¶ï¼Œæ·»åŠ äº†[å¢é‡ç±»å‹æ£€æŸ¥æ”¯æŒ](https://www.typescriptlang.org/tsconfig#incremental)ã€‚ |
